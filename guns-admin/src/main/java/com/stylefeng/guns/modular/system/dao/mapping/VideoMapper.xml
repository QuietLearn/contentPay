<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stylefeng.guns.modular.system.dao.VideoMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.stylefeng.guns.modular.system.model.Video">
        <id column="id" property="id" />
        <result column="v_id" property="vId" />
        <result column="tid" property="tid" />
        <result column="type_name" property="typeName" />
        <result column="v_name" property="vName" />
        <result column="v_pic" property="vPic" />
        <result column="v_publishyear" property="vPublishyear" />
        <result column="v_addtime" property="vAddtime" />
        <result column="v_money" property="vMoney" />
        <result column="v_req_vip" property="vReqVip" />
        <result column="gmt_created" property="gmtCreated" />
        <result column="gmt_modified" property="gmtModified" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, v_id, tid, type_name, v_name, v_pic, v_publishyear, v_addtime, v_money, v_req_vip, gmt_created, gmt_modified
    </sql>

    <delete id="syncDeleteVideoIds" parameterType="map">
        delete from cps_video
        where v_id  not in
        <foreach collection="dataIdList" item="dataId" open="(" separator="," close=")">
            #{dataId}
        </foreach>
    </delete>

    <select id="selectByVid" parameterType="int" resultMap="BaseResultMap">
        select <include refid="Base_Column_List"/>
        from cps_video
        where v_id = #{vid}


    </select>

    <select id="selectVideos" parameterType="map" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from cps_video
        <where>
        <if test="videoName != null and videoName != ''">
             v_name like CONCAT('%',#{videoName},'%'))
        </if>
        <if test="beginTime != null and beginTime != '' and endTime != null and endTime != ''">
            and (v_publishyear between CONCAT(#{beginTime}) and CONCAT(#{endTime}))
        </if>
        </where>
    </select>
</mapper>
